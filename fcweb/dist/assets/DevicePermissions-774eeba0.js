import{f as s,p as m,_ as u,o as d,c as f,a as o,w as c,b as l}from"./index-a12f404c.js";import{B as g}from"./index-1ab5511c.js";const r={};r.permissionList=["camera","storage"];r.status={denied:"PermissionStatus.denied",granted:"PermissionStatus.granted",restricted:"PermissionStatus.restricted",limited:"PermissionStatus.limited",permanentlyDenied:"PermissionStatus.permanentlyDenied"};r.openAppSettings=()=>{s.call("openAppSettings")};r.await=(e,a)=>{e==="camera"?s.register("aprcamera",a):e==="storage"&&s.register("aprstorage",a)};r.uninstall=e=>{e==="camera"?s.unregister("aprcamera"):e==="storage"&&s.unregister("aprstorage")};r.request=e=>{if(typeof e!="string")throw new Error("permissions.request函数中你传给flutter端的信息不是一个字符串,将无法识别!");{let a=!1;for(let p of r.permissionList)if(p===e){a=!0;break}if(!a)throw new Error("requestPermission函数中你请求的权限不存在!")}if(!window[`${m}requestPermission`]){console.error("你所在的位置于flutter端没有注册requestPermission函数,请先行注册方可使用,或者联系zbc!"),console.warn("如果你在非flutter端调试,那么requestPermission函数将不会产生任何作用,且不会影响你继续调试其他功能。");return}window[`${m}requestPermission`].postMessage(e)};const t={...r};const _={mounted(){t.await("camera",e=>{e===t.status.denied?s.toast("需要申请"):e===t.status.permanentlyDenied?s.toast("您申请的权限已被禁止，您需要在系统设置中设置此应用的权限"):e===t.status.granted&&s.toast("您申请的权限已获批准")}),t.await("storage",e=>{s.toast(e)})},unmounted(){t.uninstall("camera"),t.uninstall("storage")},methods:{getCamera(){t.request("camera")},getStorage(){t.request("storage")},openAppSettings(){t.openAppSettings()}}};function w(e,a,p,k,y,i){const n=g;return d(),f("main",null,[o(n,{class:"btn-item",type:"primary",block:"",onClick:i.getCamera},{default:c(()=>[l("请求照相机/摄像头权限")]),_:1},8,["onClick"]),o(n,{class:"btn-item",type:"primary",block:"",onClick:i.getStorage},{default:c(()=>[l("请求读写数据权限")]),_:1},8,["onClick"]),o(n,{class:"btn-item",type:"primary",block:"",onClick:i.openAppSettings},{default:c(()=>[l("打开 App 权限设置")]),_:1},8,["onClick"])])}const b=u(_,[["render",w],["__scopeId","data-v-046757fa"]]);export{b as default};
